# EchoNote 用户指南

本指南覆盖 EchoNote 桌面应用的核心操作、界面导航以及常见问题处理。

## 1. 应用概览
- **批量转录**：支持 MP3/WAV/FLAC/MP4 等格式，任务队列与并发控制可在设置中调整。
- **实时录制**：麦克风捕获、语音活动检测、实时转录与可选翻译。
- **日历中心**：本地事件管理、Google/Outlook 同步、提醒与外部账号状态监控。
- **时间线视图**：按时间轴浏览历史与未来事件，查看录音/转录附件，配置自动任务。
- **设置**：主题、语言、模型管理、存储路径、安全密钥等。

## 2. 首次运行 <a id="first-time-setup"></a>
<a id="first-launch"></a>
### 2.1 首次启动检查清单
1. 启动应用并按照向导选择界面语言、主题并下载语音模型。
2. EchoNote 会检查 FFmpeg、PyAudio 等依赖，若缺失会给出指引。
3. 首次启动需要等待约 5-10 秒完成初始化，然后再切换到其他模块。

<a id="first-transcription"></a>
### 2.2 创建第一次转录
1. 打开 **批量转录** 并导入音频或视频文件/文件夹。
2. 确认模型与可选的翻译语言，点击开始队列或等待自动执行。
3. 任务完成后，可查看或导出 TXT、SRT、Markdown 等格式。

初始配置写入 `~/.echonote/app_config.json`，日志位于 `~/.echonote/logs/`。

## 3. 功能详解
### 3.1 批量转录 <a id="workflow-batch"></a>
- 导航栏选择「批量转录」，导入文件或文件夹。
- 可为每个任务指定模型、输出格式、翻译语言。
- 队列支持暂停、继续、取消、重试；历史记录可在同一视图检索。

> **快捷路径：** `批量转录 → 导入文件/文件夹 → 选择模型 → 开始 → 查看/导出`

### 3.2 实时录制 <a id="workflow-realtime"></a>
- 选择音频输入设备与增益值，必要时启用 VAD 减少静音片段。
- 录制过程中可即时查看转录文本并打标签。
- 停止录制后，文件与文本会自动保存至 `~/Documents/EchoNote/` 对应目录。

> **快捷路径：** `实时录制 → 选择麦克风 → 选择模型 → 开始 → 停止 → 导出`

### 3.3 日历中心 <a id="workflow-calendar"></a>
- 在设置中添加 Google/Outlook OAuth 凭据后即可同步。
- 本地事件支持创建、编辑、删除、提醒时间与重复规则。
- 同步状态保存在 `calendar_sync_status` 表，可在界面查看。

### 3.4 时间线
- 选择日期范围快速跳转；支持分页加载与关键字搜索。
- 历史事件显示关联录音、转录、笔记，支持下载或在应用中预览。
- 未来事件可启用自动任务：自动录制、自动转录、预设语言、翻译目标。

### 3.5 设置面板 <a id="workflow-models"></a>
- **通用**：主题、语言、快捷键。
- **转录**：默认模型、并发数、输出格式、翻译目标。
- **模型管理**：下载/验证模型、查看磁盘占用。
- **日历**：外部账号管理、同步频率、冲突解决策略。
- **安全**：数据库加密状态、密钥轮换、OAuth 凭据。

> **快捷路径：** `设置 → 模型管理 → 可下载模型 → 下载`

## 4. 推荐设置 <a id="recommended-settings"></a>
- **日常使用**：模型 `base`，并发 2，设备自动。
- **高质量**：模型 `medium`/`large`，并发 1，设备 CUDA（如可用），计算类型 `float16`。
- **极速转录**：模型 `tiny`，并发 3-5，计算类型 `int8`。

## 5. 故障排查 <a id="troubleshooting"></a>
| 症状 | 快速检查 | 解决方案 |
| ---- | -------- | -------- |
| 无法导入文件 | 路径是否可读、格式是否支持 | 转换为支持格式或检查权限 |
| 模型验证失败 | 模型是否完整下载 | 在模型管理中点击「重新下载」 |
| 转录速度异常 | CPU/GPU 是否占满、是否触发资源告警 | 调整模型等级，检查 `utils/resource_monitor` 提示 |
| 日历冲突 | 同步日志是否报错 | 重新授权账户或查看数据库 `calendar_sync_status` |

- **转录失败**：确认文件格式、模型是否下载、磁盘空间是否充足，可在 **设置 → 模型管理 → 验证模型** 中排查。
- **无法录音**：检查麦克风连接、系统权限与音频输入选择。
- **日历不同步**：在 **设置 → 日历** 中移除后重新添加账户，完成 OAuth 授权。

## 6. 提升效率的小技巧
- 使用快捷键快速切换模块（参见[快捷键](#keyboard-shortcuts)）。
- 通过 `core/timeline/auto_task_scheduler.py` 预设自动录制策略，减少会议准备时间。
- 启用通知中心，在资源不足或任务完成时获得提醒。
- 结合 `tests/` 中的示例音频，验证硬件及环境配置。

## 7. 快捷键 <a id="keyboard-shortcuts"></a>
| 功能       | 快捷键         |
| ---------- | -------------- |
| 批量转录   | Ctrl+1 (⌘+1)   |
| 实时录制   | Ctrl+2 (⌘+2)   |
| 日历中心   | Ctrl+3 (⌘+3)   |
| 时间线     | Ctrl+4 (⌘+4)   |
| 设置       | Ctrl+, (⌘+,)   |

## 8. 数据位置 <a id="data-locations"></a>
```text
数据库：~/.echonote/data.db
录音：~/Documents/EchoNote/Recordings/
转录：~/Documents/EchoNote/Transcripts/
日志：~/.echonote/logs/echonote.log
```

## 9. 获取帮助 <a id="support"></a>
- 查看 `~/.echonote/logs/echonote.log` 获取详细堆栈。
- 参考 `../project-overview/zh-CN.md` 了解架构与数据流。
- 如需提问，请附上系统信息（操作系统、Python 版本、模型配置）。

祝您使用顺利！
